### الخطة النهائية لمعالجة الملفات

- [x] `schema.sql`
- [x] `types\database.ts`
- [x] `lib\db.js`
- [x] `pages\api\admin\degree-enrollment-metrics.js`
- [x] `pages\api\admin\enrollments\[id]\fix-status.js`
- [x] `pages\api\admin\enrollments\approve.js`
- [x] `pages\api\admin\enrollments\index.js`
- [x] `pages\api\admin\send-message.js`
- [x] `pages\api\admin\translate-course-details.js`
- [x] `pages\api\admin\translate-course-json-keys.js`
- [x] `pages\api\ai-assistant\ask.js`
- [x] `pages\api\assignments\apply-migrations.js`
- [x] `pages\api\assignments\index.js`
- [x] `pages\api\assignments\preview.js`
- [x] `pages\api\assignments\schedule.js`
- [x] `pages\api\assignments\student-list.js`
- [x] `pages\api\assignments\templates.js`
- [x] `pages\api\attendance\index.js`
- [x] `pages\api\attendance\record.js`
- [x] `pages\api\auth\login.js`
- [x] `pages\api\auth\logout.js`
- [x] `pages\api\auth\register-simple.js`
- [x] `pages\api\auth\register.js`
- [x] `pages\api\auth\resend-sms.js`
- [x] `pages\api\auth\verify-email.js`
- [x] `pages\api\auth\verify-phone.js`
- [x] `pages\api\certificates\generate.js`
- [x] `pages\api\commitments\update.js`
- [x] `pages\api\contact.js`
- [x] `pages\api\courses\[id].js`
- [x] `pages\api\courses\[id]\approve.js`
- [x] `pages\api\courses\[id]\enroll.js`
- [x] `pages\api\courses\[id]\enrollment-status.js`
- [x] `pages\api\courses\[id]\generate-content.js`
- [x] `pages\api\courses\[id]\launch.js`
- [x] `pages\api\courses\[id]\messages.js`
- [x] `pages\api\courses\[id]\progress.js`
- [x] `pages\api\courses\[id]\publish.js`
- [x] `pages\api\courses\[id]\replies.js`
- [x] `pages\api\courses\[id]\schedule.js`
- [x] `pages\api\courses\[id]\students.js`
- [x] `pages\api\courses\[id]\unenroll.js`
- [x] `pages\api\courses\[id]\unpublish.js`
- [x] `pages\api\courses\apply.js`
- [x] `pages\api\courses\auto-fill-templates.js`
- [x] `pages\api\courses\auto-launch-check.js`
- [x] `pages\api\courses\available.js`
- [x] `pages\api\courses\check-auto-launch.js`
- [x] `pages\api\courses\create-advanced.js`
- [x] `pages\api\courses\create-from-template.js`
- [x] `pages\api\courses\create-with-rating-system.js`
- [x] `pages\api\courses\create-with-tasks.js`
- [x] `pages\api\courses\daily-tasks.js`
- [x] `pages\api\courses\enrolled.js`
- [x] `pages\api\courses\evaluate-performance.js`
- [x] `pages\api\courses\filter.js`
- [x] `pages\api\courses\index.js`
- [x] `pages\api\courses\launch.js`
- [x] `pages\api\courses\meeting-link-update.js`
- [x] `pages\api\courses\public.js`
- [x] `pages\api\courses\publish.js`
- [x] `pages\api\courses\release-daily-tasks.js`
- [x] `pages\api\courses\schedule.js`
- [x] `pages\api\courses\task-templates.js`
- [x] `pages\api\courses\templates.js`
- [x] `pages\api\courses\update-enrollment-states.js`
- [x] `pages\api\courses\update-rating.js`
- [x] `pages\api\dashboard\dynamic.js`
- [x] `pages\api\database\fix-tasks.js`
- [x] `pages\api\database\setup-verification.js`
- [x] `pages\api\database\setup.js`
- [x] `pages\api\debug-serialization.js`
- [x] `pages\api\department\overview.js`
- [x] `pages\api\exams\create-from-text.js`
- [x] `pages\api\exams\create.js`
- [x] `pages\api\exams\questions.js`
- [x] `pages\api\exams\take.js`
- [x] `pages\api\fix-courses.js`
- [x] `pages\api\meetings\manage.js`
- [x] `pages\api\messages\[id].js`
- [x] `pages\api\messages\index.js`
- [x] `pages\api\notifications\create.js`
- [x] `pages\api\notifications\index.js`
- [x] `pages\api\notifications\mark-read.js`
- [x] `pages\api\notifications\unread-count.js`
- [x] `pages\api\parent\get-child-view-token.js`
- [x] `pages\api\payments\[id]\confirm.js`
- [x] `pages\api\payments\[id]\delete-proof.js`
- [x] `pages\api\payments\[id]\reject.js`
- [x] `pages\api\payments\[id]\upload-proof.js`
- [x] `pages\api\payments\create-payment.js`
- [x] `pages\api\payments\instapay.js`
- [x] `pages\api\performance\real-time-update.js`
- [x] `pages\api\profile\request-change.js`
- [x] `pages\api\profile\update-password.js`
- [x] `pages\api\profile\update.js`
- [x] `pages\api\profile\upload-avatar.js`
- [x] `pages\api\pusher\auth.js`
- [x] `pages\api\requests\[id]\approve.js`
- [x] `pages\api\requests\[id]\reject.js`
- [x] `pages\api\scheduler\start.js`
- [x] `pages\api\scheduler\status.js`
- [x] `pages\api\spiritual-tasks\update.js`
- [x] `pages\api\submissions\[submissionId]\grade.js`
- [x] `pages\api\tasks\[id]\grade.js`
- [x] `pages\api\tasks\[id]\submit.js`
- [x] `pages\api\tasks\activate-daily.js`
- [x] `pages\api\tasks\create.js`
- [x] `pages\api\tasks\expire-daily.js`
- [x] `pages\api\teacher\courses.js`
- [x] `pages\api\test-db.js`
- [x] `pages\api\users\[id].js`
- [x] `pages\api\users\[id]\promote.js`
- [x] `pages\api\users\add-child.js`
- [x] `pages\api\users\index.js`
- [x] `pages\api\users\teachers.js`
- [x] `pages\api\worker\tasks.js`
- [x] `pages\api\worker\tasks\[id].js`
- [x] `lib\assignmentsScheduler.js`
- [x] `lib\autoLaunchUtils.js`
- [x] `lib\countryData.js`
- [x] `lib\courseDetailsTranslator.js`
- [x] `lib\dateUtils.js`
- [x] `lib\emailService.js`
- [x] `lib\enhancedISRUtils.js`
- [x] `lib\enhancedTaskGenerator.js`
- [x] `lib\errorHandler.js`
- [x] `lib\internalScheduler.js`
- [x] `lib\isrUtils.js`
- [x] `lib\performanceUpdater.js`
- [x] `lib\pusher.js`
- [x] `lib\queryOptimizer.js`
- [x] `lib\safeArrayUtils.js`
- [x] `lib\scrollToError.js`
- [x] `lib\serializer.js`
- [x] `lib\taskGenerator.js`
- [x] `lib\validation.js`
- [x] `lib\withAuth.js`
- [x] `components\AIAssistant.js`
- [x] `components\AssignmentsSchedulerSettings.js`
- [x] `components\AssignmentTemplateForm.js`
- [x] `components\AutoFillTemplates.js`
- [x] `components\CourseCreationForm.js`
- [x] `components\CourseDetailsDisplay.js`
- [x] `components\CourseEnrollment.js`
- [x] `components\CourseForm.js`
- [x] `components\CourseMessages.js`
- [x] `components\CourseProgressDashboard.js`
- [x] `components\CourseRatingSystem.js`
- [x] `components\CourseScheduling.js`
- [x] `components\CourseVisibilityIndicator.js`
- [x] `components\DailyCommitments.js`
- [x] `components\dashboards\AdminDashboard.js`
- [x] `components\dashboards\DefaultDashboard.js`
- [x] `components\dashboards\FinanceDashboard.js`
- [x] `components\dashboards\HeadDashboard.js`
- [x] `components\dashboards\ParentDashboard.js`
- [x] `components\dashboards\StudentDashboard.js`
- [x] `components\dashboards\TeacherDashboard.js`
- [x] `components\dashboards\WorkerDashboard.js`
- [x] `components\ExamCreationUI.js`
- [x] `components\ExamQuestionManager.js`
- [x] `components\IslamicTaskTypes.js`
- [x] `components\LandingPage.js`
- [x] `components\Layout.js`
- [x] `components\PerformanceDisplay.js`
- [x] `components\PublicLayout.js`
- [x] `components\SchedulerMonitor.js`
- [x] `components\TaskGenerationStep.js`
- [x] `pages\_app.js`
- [x] `pages\_document.js`
- [x] `pages\_error.js`
- [x] `pages\404.js`
- [x] `pages\admin\courses.js`
- [x] `pages\admin\courses\[id]\edit.js`
- [x] `pages\admin\courses\[id]\schedule.js`
- [x] `pages\admin\courses\advanced-create.js`
- [x] `pages\admin\courses\approvals.js`
- [x] `pages\admin\courses\manage.js`
- [x] `pages\admin\courses\new.js`
- [x] `pages\admin\courses\schedule.js`
- [x] `pages\admin\courses\templates.js`
- [x] `pages\admin\enrollments.js`
- [x] `pages\admin\requests.js`
- [x] `pages\admin\translate-courses.js`
- [x] `pages\admin\translate-json-keys.js`
- [x] `pages\admin\users.js`
- [x] `pages\attendance.js`
- [x] `pages\certificate\[code].js`
- [x] `pages\completed-courses.js`
- [x] `pages\courses-application.js`
- [x] `pages\courses-improved.js`
- [x] `pages\courses-isr.js`
- [x] `pages\courses-public.js`
- [x] `pages\courses.js`
- [x] `pages\courses\[id].js`
- [x] `pages\courses\[id]\messages.js`
- [x] `pages\courses\submit\[taskId].js`
- [x] `pages\dashboard-improved.js`
- [x] `pages\dashboard-isr.js`
- [x] `pages\dashboard.js`
- [x] `pages\exams\[id].js`
- [x] `pages\finance.js`
- [x] `pages\index-fast.js`
- [x] `pages\index-optimized.js`
- [x] `pages\index.js`
- [x] `pages\login.js`
- [x] `pages\messages.js`
- [x] `pages\parent\start-view-session.js`
- [x] `pages\performance.js`
- [x] `pages\privacy.js`
- [x] `pages\profile.js`
- [x] `pages\signup.js`
- [x] `pages\student-finance.js`
- [x] `pages\student\assignments.js`
- [x] `pages\student\tasks.js`
- [x] `pages\teacher\assignments.js`
- [x] `pages\teacher\gradebook.js`
- [x] `pages\teacher\my-courses.js`
- [x] `pages\teacher\tasks.js`
- [x] `pages\terms.js`
- [x] `pages\user\[id]\performance.js`
- [x] `pages\verify-email.js`
- [x] `pages\verify-phone.js`
- [x] `pages\worker\attendance.js`
- [x] `pages\worker\performance.js`
- [x] `pages\worker\reports.js`
- [x] `pages\worker\schedule.js`
- [x] `pages\worker\tasks.js`
- [x] `scripts\daily-task-scheduler.js`
- [x] `scripts\migrate_parent_child_relationships.js`
- [x] `scripts\setup-missing-requirements.js`
- [x] `scripts\start-assignments-scheduler.js`
- [x] `scripts\start-internal-scheduler.js`
- [x] `scripts\test_assignments.js`
- [x] `services\notificationService.js`
- [x] `stores\assignmentsStore.js`
- [x] `stores\userStore.js`
- [x] `next.config.js`
- [x] `.eslintrc.json`
- [x] `package.json`
- [x] `data\ai-system-prompt.js`